<!DOCTYPE html>
<head>
    <title>AIIDS</title>
	<link href="bootstrap/css/bootstrap.css" rel="stylesheet">
	
	<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
	
</head>
<body>
<div class="container">
	<div class="row">
		<div class="span9">
			<h1>AIIDS</h1>
		</div>
	</div>
	<div class="row">
		<div class="span6">
			<div id="formContainer">
				<form id="pageForm">
					<fieldset>
						<legend>Send a Page</legend>
						<div id="pageAlert" class="alert" style="display:none"></div>
						<label>To:</label>
						<input id="To" type="text">
						<label>From:</label>
						<input id="From" type="text">
						<label>Message:</label>
						<textarea id="Note" rows="3"></textarea>
						<div class="form-actions">
							<button type="submit" class="btn btn-primary" style="float:left">Send</button>
						</div>
					</fieldset>
				</form>
			</div>
		</div>
		<div class="span3">
			<p>I'm other stuff out here like the call list</p>
		</div>
	</div>
</div>
    <!--<div id="onCall">
        <% onCall.forEach(function(person, index){ %>
            <li><%= person.name %></li>
        <% }); %>
    </div>
    <div id="pagerList">
		<% pagerList.Mercy.forEach(function(person, index){ %>
			<li><%= person.name %>, <%= person.url %></li>
		<% }); %>
	</div>-->
	
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script type="text/javascript">
$(function() {

var pageForm = $('#pageForm'),
	pageAlert = $('#pageAlert');
	
pageForm.bind('submit', function(e) {
	e.preventDefault();
	
	var params = {
		To: pageForm.find('input#To').val(),
		From: pageForm.find('input#From').val(),
		Note: pageForm.find('textarea#Note').val()
	};
	
	console.log(params);
	
	$.post('/sendPage', params, function(response) {
		if(response.success) {
			pageAlert
				.removeClass('alert-error')
				.addClass('alert-success')
				.text(response.msg)
				.fadeIn().delay(5000).fadeOut();
		} else {
			pageAlert
				.removeClass('alert-success')
				.addClass('alert-error')
				.text(response.msg)
				.fadeIn().delay(5000).fadeOut();
		}
	}, 'json');
});

});
</script>
</body>
</html>